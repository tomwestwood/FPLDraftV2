{"ast":null,"code":"import { trigger, transition, style, animate, state } from '@angular/animations';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { ConfirmPlayerComponent } from '../../controls/confirm-player/confirm-player.component';\nimport { Draft, DraftFunctions, DraftManagerPick, DraftStatuses } from '../../models/draft';\nimport { FPLBase } from '../../models/fpl';\nimport { DraftControllerService } from '../services/draft-controller.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { SearchFilter } from '../../models/searchFilter';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/draft-controller.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/table\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/sort\";\nimport * as i12 from \"@angular/material/paginator\";\nimport * as i13 from \"@angular/material/divider\";\nimport * as i14 from \"@angular/material/progress-spinner\";\nimport * as i15 from \"@angular/material/progress-bar\";\n\nfunction DraftSelectingComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h4\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵelement(4, \"mat-progress-bar\", 7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Get ready to draft in \", ctx_r0.draftCountdown, \"...\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"color\", ctx_r0.Warn)(\"value\", ctx_r0.draftCountdown / 3 * 100);\n  }\n}\n\nfunction DraftSelectingComponent_div_1_mat_form_field_11_mat_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 20)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"img\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const club_r7 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", club_r7.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", club_r7.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", club_r7.badge_url, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction DraftSelectingComponent_div_1_mat_form_field_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-form-field\", 14)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Club:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-select\", 17);\n    i0.ɵɵlistener(\"valueChange\", function DraftSelectingComponent_div_1_mat_form_field_11_Template_mat_select_valueChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.searchFilter.club_id = $event);\n    })(\"selectionChange\", function DraftSelectingComponent_div_1_mat_form_field_11_Template_mat_select_selectionChange_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.updateFilter());\n    });\n    i0.ɵɵelementStart(4, \"mat-option\", 18);\n    i0.ɵɵtext(5, \"All\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, DraftSelectingComponent_div_1_mat_form_field_11_mat_option_6_Template, 4, 3, \"mat-option\", 19);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r4.searchFilter.club_id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.fplBase.clubs);\n  }\n}\n\nfunction DraftSelectingComponent_div_1_mat_form_field_12_mat_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 20)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const position_r12 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", position_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(position_r12.singular_name_short);\n  }\n}\n\nfunction DraftSelectingComponent_div_1_mat_form_field_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-form-field\", 14)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Position:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-select\", 17);\n    i0.ɵɵlistener(\"valueChange\", function DraftSelectingComponent_div_1_mat_form_field_12_Template_mat_select_valueChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.searchFilter.position_id = $event);\n    })(\"selectionChange\", function DraftSelectingComponent_div_1_mat_form_field_12_Template_mat_select_selectionChange_3_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.updateFilter());\n    });\n    i0.ɵɵelementStart(4, \"mat-option\", 18);\n    i0.ɵɵtext(5, \"All\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, DraftSelectingComponent_div_1_mat_form_field_12_mat_option_6_Template, 3, 2, \"mat-option\", 19);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r5.searchFilter.position_id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.fplBase.positions);\n  }\n}\n\nfunction DraftSelectingComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9);\n    i0.ɵɵelement(2, \"mat-progress-spinner\", 10);\n    i0.ɵɵelementStart(3, \"div\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(5, \"mat-divider\", 12);\n    i0.ɵɵelementStart(6, \"div\", 13)(7, \"mat-form-field\", 14)(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Find player:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function DraftSelectingComponent_div_1_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.searchFilter.player_name = $event);\n    })(\"keyup\", function DraftSelectingComponent_div_1_Template_input_keyup_10_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.updateFilter());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(11, DraftSelectingComponent_div_1_mat_form_field_11_Template, 7, 2, \"mat-form-field\", 16);\n    i0.ɵɵtemplate(12, DraftSelectingComponent_div_1_mat_form_field_12_Template, 7, 2, \"mat-form-field\", 16);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 40)(\"value\", ctx_r1.timer / 30 * 100);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.timer);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"vertical\", true);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.searchFilter.player_name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.fplBase.clubs);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.fplBase.positions);\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"player-selected\": a0\n  };\n};\n\nfunction DraftSelectingComponent_mat_table_2_mat_row_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\", 33);\n  }\n\n  if (rf & 2) {\n    const element_r31 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, element_r31.draft_manager));\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_cell_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 34);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_5_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 38);\n    i0.ɵɵtext(1, \"stars\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_5_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 39);\n    i0.ɵɵtext(1, \"how_to_reg\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\")(1, \"div\", 35);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, DraftSelectingComponent_mat_table_2_mat_cell_5_span_3_Template, 2, 0, \"span\", 36);\n    i0.ɵɵtemplate(4, DraftSelectingComponent_mat_table_2_mat_cell_5_span_4_Template, 2, 0, \"span\", 37);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r32 = ctx.$implicit;\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(element_r32.web_name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r32.favourited);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r32.draft_manager_id == ctx_r22.draft.draft_manager_id);\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_cell_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 34);\n    i0.ɵɵtext(1, \"Position\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r35 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r35.position.singular_name_short);\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_cell_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 34);\n    i0.ɵɵtext(1, \"Club\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵelement(1, \"img\", 40);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r36 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", element_r36.club.badge_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r36.club.short_name, \"\");\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_cell_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 34);\n    i0.ɵɵtext(1, \"Value\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r37 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r37.now_cost / 10);\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_header_cell_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Options\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_17_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 42);\n    i0.ɵɵlistener(\"click\", function DraftSelectingComponent_mat_table_2_mat_cell_17_span_1_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const element_r38 = i0.ɵɵnextContext().$implicit;\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r40.selectPlayer(element_r38));\n    });\n    i0.ɵɵtext(1, \"add_task\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_mat_cell_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtemplate(1, DraftSelectingComponent_mat_table_2_mat_cell_17_span_1_Template, 2, 0, \"span\", 41);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r38 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !element_r38.draft_manager);\n  }\n}\n\nfunction DraftSelectingComponent_mat_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-table\", 22);\n    i0.ɵɵtemplate(1, DraftSelectingComponent_mat_table_2_mat_header_row_1_Template, 1, 0, \"mat-header-row\", 23);\n    i0.ɵɵtemplate(2, DraftSelectingComponent_mat_table_2_mat_row_2_Template, 1, 3, \"mat-row\", 24);\n    i0.ɵɵelementContainerStart(3, 25);\n    i0.ɵɵtemplate(4, DraftSelectingComponent_mat_table_2_mat_header_cell_4_Template, 2, 0, \"mat-header-cell\", 26);\n    i0.ɵɵtemplate(5, DraftSelectingComponent_mat_table_2_mat_cell_5_Template, 5, 3, \"mat-cell\", 27);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(6, 28);\n    i0.ɵɵtemplate(7, DraftSelectingComponent_mat_table_2_mat_header_cell_7_Template, 2, 0, \"mat-header-cell\", 26);\n    i0.ɵɵtemplate(8, DraftSelectingComponent_mat_table_2_mat_cell_8_Template, 2, 1, \"mat-cell\", 27);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(9, 29);\n    i0.ɵɵtemplate(10, DraftSelectingComponent_mat_table_2_mat_header_cell_10_Template, 2, 0, \"mat-header-cell\", 26);\n    i0.ɵɵtemplate(11, DraftSelectingComponent_mat_table_2_mat_cell_11_Template, 3, 2, \"mat-cell\", 27);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(12, 30);\n    i0.ɵɵtemplate(13, DraftSelectingComponent_mat_table_2_mat_header_cell_13_Template, 2, 0, \"mat-header-cell\", 26);\n    i0.ɵɵtemplate(14, DraftSelectingComponent_mat_table_2_mat_cell_14_Template, 2, 1, \"mat-cell\", 27);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(15, 31);\n    i0.ɵɵtemplate(16, DraftSelectingComponent_mat_table_2_mat_header_cell_16_Template, 2, 0, \"mat-header-cell\", 32);\n    i0.ɵɵtemplate(17, DraftSelectingComponent_mat_table_2_mat_cell_17_Template, 2, 1, \"mat-cell\", 27);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataSource\", ctx_r2.playerDataSource);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r2.displayedColumns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r2.displayedColumns);\n  }\n}\n\nconst _c1 = function () {\n  return [10, 20, 50];\n};\n\nfunction DraftSelectingComponent_mat_paginator_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-paginator\", 43);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\n\nexport let DraftSelectingComponent = /*#__PURE__*/(() => {\n  class DraftSelectingComponent {\n    constructor(draftControllerService, dialog, _snackBar) {\n      this.draftControllerService = draftControllerService;\n      this.dialog = dialog;\n      this._snackBar = _snackBar;\n      this.showDraftSelecting = false;\n      this.draftCountdown = 3;\n      this.displayedColumns = ['web_name', 'position', 'club', 'now_cost', 'draftOptions'];\n      this.timer = 30;\n      draftControllerService.fplBase.subscribe(fplBase => {\n        if (this.fplBase) {\n          this.updateFilter();\n        }\n      });\n    }\n\n    set matPaginator(mp) {\n      this.paginator = mp;\n      this.setDataSourceAttributes();\n    }\n\n    set matSort(ms) {\n      this.sort = ms;\n      this.setDataSourceAttributes();\n    }\n\n    ngOnInit() {\n      if (this.fplBase) {\n        this.updateFilter();\n      }\n\n      this.searchFilter = new SearchFilter();\n      this.showDraftSelecting = false;\n      this.draftCountdown = 3;\n      this.timeout = setInterval(() => {\n        if (this.draftCountdown > 0) {\n          this.draftCountdown--;\n        }\n      }, 1000);\n      setTimeout(() => {\n        this.showDraftSelecting = true;\n        this.startTimer();\n      }, 3000);\n    }\n\n    selectPlayer(element) {\n      if (this.draft.draft_manager.draft_manager_picks.filter(dmp => dmp.player.club.code == element.club.code).length >= 3) {\n        this._snackBar.open(`You already have 3 players from ${element.club.name}. Please select another player.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      }\n\n      if (element.position.id == 1 && this.draft.draft_manager.draft_manager_picks.filter(dmp => dmp.player.position.id == 1).length >= 2) {\n        this._snackBar.open(`You have already selected 2 goalkeepers. Please select a player from another position.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      } else if (element.position.id == 2 && this.draft.draft_manager.draft_manager_picks.filter(dmp => dmp.player.position.id == 2).length >= 5) {\n        this._snackBar.open(`You have already selected 5 defenders. Please select a player from another position.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      } else if (element.position.id == 3 && this.draft.draft_manager.draft_manager_picks.filter(dmp => dmp.player.position.id == 3).length >= 5) {\n        this._snackBar.open(`You have already selected 5 midfielders. Please select a player from another position.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      } else if (element.position.id == 4 && this.draft.draft_manager.draft_manager_picks.filter(dmp => dmp.player.position.id == 4).length >= 3) {\n        this._snackBar.open(`You have already selected 3 forwards. Please select a player from another position.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      } else if (this.draft.draft_manager.draft_manager_picks.reduce(function (a, b) {\n        return a + b.signed_price;\n      }, 0) + element.now_cost / 10 > 100) {\n        this._snackBar.open(`Your team value would exceed £100.0m. Please select a cheaper option.`, 'Dismiss', {\n          duration: 2000\n        });\n\n        return;\n      }\n\n      this.confirmPickDialog(element);\n    }\n\n    updateFilter() {\n      var _a, _b, _c, _d;\n\n      let tempFplBase = this.fplBase.elements.filter(a => !this.draft.draft_manager_picks.some(dmp => dmp.player_id == a.id));\n      if (((_a = this.searchFilter) === null || _a === void 0 ? void 0 : _a.position_id) > 0) tempFplBase = tempFplBase.filter(a => a.position.id == this.searchFilter.position_id);\n      if (((_b = this.searchFilter) === null || _b === void 0 ? void 0 : _b.club_id) > 0) tempFplBase = tempFplBase.filter(a => a.club.id == this.searchFilter.club_id);\n\n      if ((_c = this.searchFilter) === null || _c === void 0 ? void 0 : _c.showFavourites) {\n        tempFplBase = tempFplBase.filter(a => a.favourited);\n      }\n\n      this.playerDataSource = new MatTableDataSource(tempFplBase);\n      this.playerDataSource.filter = '';\n      if ((_d = this.searchFilter) === null || _d === void 0 ? void 0 : _d.player_name) this.playerDataSource.filter = this.searchFilter.player_name.trim().toLocaleLowerCase();\n      this.setDataSourceAttributes();\n    }\n\n    confirmPickDialog(element) {\n      const dialogRef = this.dialog.open(ConfirmPlayerComponent, {\n        data: {\n          player: element\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this._snackBar.open('You picked: ' + element.web_name, 'Dismiss', {\n            duration: 2000\n          });\n\n          this.confirmPlayerSelection(element);\n        }\n      });\n    }\n\n    confirmPlayerSelection(player) {\n      let isDraftAuction = this.draftControllerService.draftIsAuction();\n      var dmp = new DraftManagerPick();\n      dmp.nominator_id = this.draft.draft_manager_id;\n      dmp.player_id = player.id;\n      dmp.player = player;\n      dmp.draft_id = this.draft.id;\n      dmp.value_price = player.now_cost / 10;\n      dmp.pick_order = this.draft.draft_round;\n      let dmsLeftInRound = this.draftControllerService.getRemainingDraftManagersInRound(this.draft.draft_managers, this.draft.draft_round, this.draft.draft_manager.draft_seed, this.draft.direction).filter(dm => dm.id != this.draft.draft_manager.id);\n\n      if (!isDraftAuction || dmsLeftInRound.length == 0) {\n        dmp.signed_price = player.now_cost / 10;\n        dmp.draft_manager_id = this.draft.draft_manager_id;\n      }\n\n      this.stopTimer();\n      this.draftControllerService.savePick(dmp).subscribe(savedDmp => {\n        var basicPick = DraftFunctions.getBasicDraftManagerPickObject(savedDmp);\n        this.draftControllerService.updatePickNotification(basicPick);\n\n        if (!isDraftAuction || dmsLeftInRound.length == 0) {\n          var player = this.fplBase.elements.find(a => a.id == savedDmp.player_id);\n\n          if (player) {\n            player.draft_manager = this.draft.draft_manager;\n            player.draft_manager_id = this.draft.draft_manager_id;\n            this.draft.draft_manager.draft_manager_picks.push(savedDmp);\n          }\n        }\n\n        this.draft.draft_manager_picks.push(savedDmp);\n        this.draft.draft_manager.draft_squad = DraftFunctions.getDraftSquadForManager(this.draft.draft_manager);\n        this.draftControllerService.draft.next(this.draft);\n\n        if (!isDraftAuction || dmsLeftInRound.length == 0) {\n          this.draftControllerService.setDraftStatus(DraftStatuses.SigningComplete);\n        } else {\n          this.draftControllerService.setDraftStatus(DraftStatuses.SealedBids);\n        }\n\n        this.draftControllerService.saveDraft(this.draft).subscribe(draft => {\n          this.draftControllerService.draft.next(this.draft);\n        });\n      });\n    }\n\n    startTimer() {\n      this.stopTimer();\n      this.timer = 30;\n      this.timeout = setInterval(() => {\n        if (this.timer > 0) {\n          this.timer--;\n        } else {\n          this.timeElapsed();\n        }\n      }, 1000);\n    }\n\n    stopTimer() {\n      clearInterval(this.timeout);\n    }\n\n    timeElapsed() {\n      this.stopTimer();\n      this.draftControllerService.setDraftStatus(DraftStatuses.Timeout);\n    }\n\n    setDataSourceAttributes() {\n      this.playerDataSource.paginator = this.paginator;\n\n      if (this.playerDataSource.paginator) {\n        this.playerDataSource.paginator.pageSize = this.draft.draft_manager_id == 27 ? 50 : 10;\n      }\n\n      this.playerDataSource.sort = this.sort;\n    }\n\n  }\n\n  DraftSelectingComponent.ɵfac = function DraftSelectingComponent_Factory(t) {\n    return new (t || DraftSelectingComponent)(i0.ɵɵdirectiveInject(i1.DraftControllerService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  DraftSelectingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DraftSelectingComponent,\n    selectors: [[\"draft-selecting-component\"]],\n    viewQuery: function DraftSelectingComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.matPaginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.matSort = _t.first);\n      }\n    },\n    inputs: {\n      draft: \"draft\",\n      fplBase: \"fplBase\"\n    },\n    decls: 4,\n    vars: 4,\n    consts: [[\"style\", \"height: 100%; display: flex; flex-direction: column; justify-content: center;\", 4, \"ngIf\"], [\"class\", \"selection-header\", 4, \"ngIf\"], [\"class\", \"mat-elevation-z8\", \"matSort\", \"\", \"matSortActive\", \"now_cost\", \"matSortDirection\", \"desc\", 3, \"dataSource\", 4, \"ngIf\"], [\"showFirstLastButtons\", \"\", 3, \"pageSizeOptions\", 4, \"ngIf\"], [2, \"height\", \"100%\", \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"center\"], [2, \"color\", \"#17252A\", \"width\", \"100%\", \"text-align\", \"center\", \"align-items\", \"center\", \"justify-content\", \"center\", \"display\", \"flex\"], [2, \"width\", \"100%\", \"display\", \"flex\", \"justify-content\", \"center\"], [2, \"width\", \"120px\", 3, \"color\", \"value\"], [1, \"selection-header\"], [1, \"timer\"], [\"color\", \"primary\", 1, \"spinner\", 3, \"diameter\", \"value\"], [1, \"timer-text\"], [3, \"vertical\"], [1, \"filters\"], [\"appearance\", \"fill\", 1, \"filter-item\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\", \"keyup\"], [\"appearance\", \"fill\", \"class\", \"filter-item\", 4, \"ngIf\"], [3, \"value\", \"valueChange\", \"selectionChange\"], [\"value\", \"0\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [2, \"height\", \"20px\", \"width\", \"20px\", \"margin-left\", \"16px\", \"vertical-align\", \"middle\", 3, \"src\"], [\"matSort\", \"\", \"matSortActive\", \"now_cost\", \"matSortDirection\", \"desc\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [4, \"matHeaderRowDef\"], [3, \"ngClass\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"matColumnDef\", \"web_name\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"position\"], [\"matColumnDef\", \"club\"], [\"matColumnDef\", \"now_cost\"], [\"matColumnDef\", \"draftOptions\"], [4, \"matHeaderCellDef\"], [3, \"ngClass\"], [\"mat-sort-header\", \"\"], [2, \"margin-right\", \"8px\"], [\"class\", \"material-icons\", \"style\", \"color: deeppink; margin-right: 2px;\", 4, \"ngIf\"], [\"class\", \"material-icons\", \"style\", \"color: mediumspringgreen; margin-right: 2px;\", 4, \"ngIf\"], [1, \"material-icons\", 2, \"color\", \"deeppink\", \"margin-right\", \"2px\"], [1, \"material-icons\", 2, \"color\", \"mediumspringgreen\", \"margin-right\", \"2px\"], [2, \"height\", \"20px\", \"margin-right\", \"8px\", 3, \"src\"], [\"class\", \"material-icons\", \"style\", \"color: mediumspringgreen; cursor: pointer;\", 3, \"click\", 4, \"ngIf\"], [1, \"material-icons\", 2, \"color\", \"mediumspringgreen\", \"cursor\", \"pointer\", 3, \"click\"], [\"showFirstLastButtons\", \"\", 3, \"pageSizeOptions\"]],\n    template: function DraftSelectingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DraftSelectingComponent_div_0_Template, 5, 3, \"div\", 0);\n        i0.ɵɵtemplate(1, DraftSelectingComponent_div_1_Template, 13, 7, \"div\", 1);\n        i0.ɵɵtemplate(2, DraftSelectingComponent_mat_table_2_Template, 18, 3, \"mat-table\", 2);\n        i0.ɵɵtemplate(3, DraftSelectingComponent_mat_paginator_3_Template, 1, 2, \"mat-paginator\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.showDraftSelecting);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showDraftSelecting);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.playerDataSource && ctx.showDraftSelecting);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showDraftSelecting);\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.MatTable, i6.MatHeaderCellDef, i6.MatHeaderRowDef, i6.MatColumnDef, i6.MatCellDef, i6.MatRowDef, i6.MatHeaderCell, i6.MatCell, i6.MatHeaderRow, i6.MatRow, i7.MatFormField, i7.MatLabel, i8.MatSelect, i9.MatOption, i10.MatInput, i11.MatSort, i11.MatSortHeader, i12.MatPaginator, i13.MatDivider, i14.MatProgressSpinner, i15.MatProgressBar],\n    styles: [\".selection-header[_ngcontent-%COMP%]{background-color:#17252a;border-radius:6px;width:100%;margin-bottom:4px;padding:8px;display:flex}.selection-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{justify-content:center;align-self:center;margin-left:8px;margin-right:8px;display:flex;align-items:center}.selection-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:relative}.selection-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]   .timer-text[_ngcontent-%COMP%]{position:absolute;text-align:center}.filter-item[_ngcontent-%COMP%]{margin-right:16px}.mat-divider[_ngcontent-%COMP%]{margin-left:8px;margin-right:16px}.mat-checkbox[_ngcontent-%COMP%]{font-size:smaller}\"],\n    data: {\n      animation: [trigger('flyInOut', [state('in', style({\n        transform: 'translateX(0)'\n      })), transition('void => *', [style({\n        transform: 'translateX(-100%)'\n      }), animate(100)]), transition('* => void', [animate(100, style({\n        transform: 'translateX(100%)'\n      }))])]), trigger('fadeInOut', [transition(':enter', [style({\n        opacity: 0\n      }), animate(500, style({\n        opacity: 1\n      }))]), transition(':leave', [animate(0, style({\n        opacity: 0\n      }))])])]\n    }\n  });\n  return DraftSelectingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}